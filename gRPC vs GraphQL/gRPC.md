# 1. 為什麼需要gRPC

想像一下 不同程序 或 不同系統 之間彼此要進行交流,要互相交換資料,我們可能可以透過API的方式來溝通, 常用的方式像是 Restful API 可以透過Json, XML 等等的資料格式來讓系統與系統之間交換資料, 但Restful API交換資料會遇到以下幾個過程(以下以Json為例)

1. Json是一段「固定格式」的文字,即使資料只有一點點改變,也依定要傳完整的「格式」
		例如以下格式:
	```javascript=
		{
			"name":"",
			"age":"",
			"skill":"",
			"address":"",
			"salary":""
			"phone":""
		}
```

假設我今天想要改變"name"這個屬性, 我們必須透過以下的格式傳輸到相關的系統(或程式)去改變

```javascript=
		{
			"name":"New Name",
			"age":"",
			"skill":"",
			"address":"",
			"salary":""
			"phone":""
		}
```

#### 這有什麼不好嗎?

為了傳輸"name"這個資訊, 我需要浪費我的傳輸資源, 來同步傳送其他不重要的資料(age, skill, address, salary, phone) 但這僅僅只是為了滿足Json格式 
,在流量大的系統或非常要求速度的場景之下,傳輸這些資料其實是一種浪費, 畢竟也是她們也是傳輸負載的一部分,
> ***如果可以只傳輸必要的資料的話,可以想像的因為傳輸封包變小了, 效率一定會更好***
# 2. gRPC是什麼?

gRPC是一套開源的遠端程序呼叫(remote procedure call) 系統，可搭配C#、python、Go等等主流語言，由google在2015年提出的(所以才叫"g"RPC)，其http協定是使用http/2，因此傳輸速率會比http/1.1來的快, 數據傳輸格式使用 Protocol Buffer

# 3. 什麼是 Protocol Buffer

Protocol Buffer(俗稱Protobuf) 是一種序列化數據格式,用於數據存儲和通信交換。

有以下幾個主要特點:
1. 結構化數據編碼格式,類似XML,但更簡單、更小、更快。
2. ==採用二進制方式編碼,資料更小、傳輸效率更高==。
3. 跨語言、跨平台,可在不同環境下使用。
# 3. gRPC如何做到的?

1. 使用二進制 Protobuf 序列化資料, 不同於 RESTful 使用 JSON/XML文本格式
2. 使用二進制傳輸，可以減少網絡傳輸流量
3. 客户端可以預編譯反序列化代碼,數據直接轉成Object, 可避免JSON/XML解析的效能消耗
4. ==客戶端和服務端需要共用相同的 .proto 檔,以確保訊息匹配==

Protocol Buffer的使用流程大致如下:
1. 使用 .proto 檔案定義想要的資料結構
2. 將 .proto檔 編譯成指定語言的資料訪問類別(如C++、Java、Python等)
3. 在應用程式中使用生成的資料存取類別，就可以輕鬆讀寫Protocol Buffer的資料格式

以下是.proto檔的樣子
![[Pasted image 20240510150442.png]]

### 最常見的應用場景是:

- 微服務框架下，多種語言服務之間的高效互動。
- 將手機服務、瀏覽器連接至後台
- 產生高效的客戶端庫


### 心得:
在這個 microservice 的時代中，服務與服務之間常以http作為溝通，傳統上要發起http request 你要看提供API端的 http methods、他的參數要怎麼調用等。

而gRPC你只需要client與server 維護同樣的一份 .proto 檔案，省時又省力，傳輸速率又快，所以我認為gRPC其優點不僅止在 http/2 上傳輸速率快，在於內部網路的傳輸可以用這種更高效的方式，
但可能就不適合對外的傳輸與設計了，畢竟這種方式在規劃上就會變得很難有架構性，所以適合在已知的內部服務中使用,所以理想的架構會像是以下這樣
